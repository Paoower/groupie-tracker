<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{.Artist.Name}} | Groupie Tracker</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script defer>
		const capitalizeFirstLetter = (string) => {
			return string.charAt(0).toUpperCase() + string.slice(1);
		}

		const upAllLetters = (string) => {
			s = ""
			for (let y = 0; i < string.length; i++) {
				s += string.charAt(i).toUpperCase()
			}
			return s
		}

		const createItem = (headerTitle, content) => {
			item = document.createElement("div")
			item.classList.add("item")
			itemHeader = document.createElement("div")
			itemHeader.classList.add("header", "p-2", "bg-slate-950", "rounded-t-lg", "cursor-pointer")
			itemHeader.innerHTML = capitalizeFirstLetter(headerTitle)
			itemContent = document.createElement("div")
			itemContent.classList.add("content", "bg-slate-900", "rounded-b-lg", "transition-all", "h-0", "overflow-hidden")
			content.forEach(date => {
				p = document.createElement("p")
				p.innerHTML = date.replaceAll("-", "/")
				p.classList.add("text-sm")
				itemContent.appendChild(p)
			})
			item.appendChild(itemHeader)
			item.appendChild(itemContent)
			return item
		}

		const locations = Object.keys({{.Relations.DatesLocations }})
		const loc = {{.Relations.DatesLocations }}

		window.onload = () => {
			console.log(locations)
			for (i = 0; i < locations.length; i++) {
				e = locations[i].split("-")
				r = e[0]+" "+upAllLetters(e[1])
				item = createItem(r, loc[locations[i]])
				document.getElementById("locations").appendChild(item)
				console.log(i)
			}

			document.querySelectorAll(".item").forEach(item => {
				item.querySelector(".header").addEventListener("click", () => {
					item.classList.toggle("active")
				})
			})
		};
	</script>
	<link rel="shortcut icon"
		href="https://static.vecteezy.com/system/resources/previews/002/986/080/non_2x/letter-g-logo-design-template-free-vector.jpg"
		type="image/x-icon">
	<style type="text/tailwindcss">
		.item.active .content{
			@apply p-2 h-auto
		}

		.item:not(.active) .content{
			@apply h-0 overflow-hidden py-0
		}
	</style>
</head>

<body class="dark:bg-slate-700">
	<div class="flex justify-center items-center dark:text-white dark:bg-slate-800 bg-gray-100 p-5 px-6 gap-4 relative">
		<input type="text" name="search" id="search" placeholder="Search for an artist, a location, an album"
			class="dark:bg-slate-600 dark:text-white bg-gray-50 outline-none transition-all text-gray-900 w-1/3 text-sm rounded-lg focus:ring-2 focus:ring-blue-500 p-2">
		<div id="results" class="absolute w-1/3 p-2 rounded-sm shadow-lg text-left bg-white hidden -bottom-5">
		</div>
		<div class="absolute right-0 mr-8 flex gap-4">
			<a href="/artists" class="text-md">Artists</a>
			<a href="/concerts" class="text-md">Concert Dates</a>
		</div>
	</div>

	<div class="flex mt-20">
		<div class="md:mx-auto">
			<div
				class="grid grid-cols-2 gap-6 min-w-[700px] border p-8 rounded-lg shadow-lg w-full dark:bg-slate-800 dark:text-white dark:border-slate-600">
				<img class="mr-12" src="{{.Artist.Image}}" width="300px" alt="">
				<div class="flex-col gap-4 mr-4">
					<h1 class="font-semibold text-3xl mb-4">{{.Artist.Name}}</h1>
					{{range .Artist.Members}}
					<p class="text-sm">{{.}}</p>
					{{end}}
				</div>
				<div>
					<h1 class="font-semibold text-lg mb-4">Concert Locations & Dates <h1>
							<div id="locations" class="flex flex-col gap-2"></div>
				</div>
				<div>
					<h1 class="font-semibold mb-4 text-lg">General Infos</h1>
					<h1 class="text-sm">Creation Date: {{ .Artist.CreationDate }}</h1>
					<h1 class="text-sm">First Album: {{ .Artist.FirstAlbum }}</h1>
				</div>
			</div>
		</div>
	</div>
</body>

</html>